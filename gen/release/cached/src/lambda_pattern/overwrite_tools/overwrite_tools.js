var ERR, word_wrap, lambda_state_history, yaml, get_info, update_history, move_tools_scripts, overwrite_tools;
'use strict';
ERR = require('async-stacktrace');
word_wrap = require('word-wrap');
lambda_state_history = require('../shared/lambda_state_history');
yaml = require('js-yaml');
get_info = require('./get_info');
update_history = require('./update_history');
move_tools_scripts = require('./move_tools_scripts');
overwrite_tools = function overwrite_tools(root, cb) {
  var err, updatables_version, history;
  get_info(root, function (arguments, _$param0, _$param1, _$param2) {
    err = _$param0;
    updatables_version = _$param1;
    history = _$param2;
    if (ERR(err, cb)) {
      return;
    }
    move_tools_scripts(root, history['current_state_version'], function (arguments, _$param3) {
      err = _$param3;
      if (ERR(err, cb)) {
        return;
      }
      update_history(root, history, updatables_version, function (arguments, _$param4, _$param5) {
        err = _$param4;
        history = _$param5;
        if (ERR(err, cb)) {
          return;
        }
        cb();
      }.bind(this, arguments));
    }.bind(this, arguments));
  }.bind(this, arguments));
};
module.exports = overwrite_tools;
/* Generated by Continuation.js v0.1.7 */