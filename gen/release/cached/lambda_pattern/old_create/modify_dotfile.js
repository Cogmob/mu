var ERR, word_wrap, path, yaml, fs, modify_dotfile;
'use strict';
ERR = require('async-stacktrace');
word_wrap = require('word-wrap');
path = require('path');
yaml = require('js-yaml');
fs = require('fs-extra');
modify_dotfile = function modify_dotfile(root, project_name, cb) {
  var managed_path, err, dotfile;
  managed_path = path.resolve(root, 'cached', 'current_managed_projects');
  fs.ensureFile(managed_path, function (arguments, _$param0) {
    err = _$param0;
    if (ERR(err, cb)) {
      return;
    }
    fs.readFile(managed_path, 'utf8', function (arguments, _$param1, _$param2) {
      err = _$param1;
      dotfile = _$param2;
      if (ERR(err, cb)) {
        return;
      }
      dotfile = yaml.load(dotfile);
      if (!(dotfile instanceof Array)) {
        dotfile = [];
      }
      if (dotfile.indexOf(project_name) === -1) {
        dotfile.push(project_name);
      }
      fs.writeFile(managed_path, yaml.dump(dotfile), cb);
    }.bind(this, arguments));
  }.bind(this, arguments));
};
module.exports = modify_dotfile;
/* Generated by Continuation.js v0.1.7 */